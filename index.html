<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø§Ù„ÙÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø°ÙƒÙŠØ©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;600;700&display=swap');
        *{box-sizing:border-box}html,body{height:100%;width:100%;margin:0;padding:0;overflow:hidden}
        body{font:16px 'Cairo',sans-serif;min-height:100vh;min-width:100vw;background:linear-gradient(135deg,#fdf2f8 0%,#fbcfe8 40%,#fff 100%)}
        #app{width:100vw!important;height:100vh!important;min-height:0!important;min-width:0!important;box-shadow:0 8px 40px #0002}
        .card{@apply rounded-2xl shadow-xl p-5 flex flex-col items-center gap-2 text-white transition-all duration-200}
        .card:hover{transform:scale(1.04) translateY(-4px);box-shadow:0 16px 48px #fecdd3;z-index:2}
        #chat-messages{scrollbar-width:thin;scrollbar-color:#60a5fa #f3f4f6}
        #chat-messages::-webkit-scrollbar{width:6px}
        #chat-messages::-webkit-scrollbar-track{background:#f3f4f6;border-radius:10px}
        #chat-messages::-webkit-scrollbar-thumb{background:#60a5fa;border-radius:10px}
        @media(max-width:640px){#app{box-shadow:none!important}.card{padding:3vw!important}}
    </style>
</head>
<body class="w-screen h-screen">
    <div id="app" class="flex flex-col lg:flex-row border border-pink-200">
        <div class="flex-grow p-6 lg:p-8 space-y-6 overflow-y-auto">
            <header class="flex flex-col sm:flex-row justify-between items-center gap-4">
                <h1 class="text-3xl font-bold text-pink-800">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„ÙÙ„Ø§Ø­ÙŠØ©</h1>
                <p class="text-pink-500">Ù…Ø­Ø§ÙƒØ§Ø© Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ´Ø¹Ø±Ø§Øª (ESP32)</p>
            </header>
            <div id="variable-grid" class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-5">
                <div class="bg-pink-100 rounded-2xl shadow-xl p-5 flex items-start gap-4 xl:col-span-3 border-b-4 border-pink-400 card-modern">
                    <span class="text-5xl ml-4">ğŸ‘©â€ğŸŒ¾</span>
                    <div>
                        <div class="text-pink-800 font-bold text-xl">Ù…Ø¨Ø±ÙˆÙƒØ© â€” Ù†ØµÙŠØ­Ø© Ø§Ù„ÙŠÙˆÙ…</div>
                        <div class="text-lg font-semibold text-pink-700" id="val-advice">...Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„</div>
                    </div>
                </div>
                <!-- Cards -->
                <div id="card-pump" class="card bg-pink-500" data-key="pumpOn">
                    <span class="text-4xl">ğŸš¿</span>
                    <div class="font-bold text-lg">Ø§Ù„Ù…Ø¶Ø®Ø©</div>
                    <div class="text-2xl font-bold" id="val-pump">Ù…ØªÙˆÙ‚ÙØ©</div>
                    <button id="pumpToggleBtn" class="mt-3 px-3 py-2 rounded-lg bg-white text-pink-600 font-semibold shadow-sm hover:bg-pink-50">ØªØ´ØºÙŠÙ„/Ø¥ÙŠÙ‚Ø§Ù</button>
                </div>
                <div id="card-motor" class="common-card bg-pink-600" data-key="motorOn">
                    <span class="text-4xl">âš™ï¸</span>
                    <div class="font-bold text-lg">Ø§Ù„Ù…Ø­Ø±Ùƒ</div>
                    <div class="text-2xl font-bold" id="val-motor">Ù…ØªÙˆÙ‚Ù</div>
                    <button id="motorToggleBtn" class="mt-3 px-3 py-2 rounded-lg bg-white text-pink-600 font-semibold shadow-sm hover:bg-pink-50">ØªØ´ØºÙŠÙ„/Ø¥ÙŠÙ‚Ø§Ù</button>
                </div>
                <div class="common-card bg-pink-400 cursor-pointer" data-key="humidity" role="button" tabindex="0">
                    <span class="text-4xl">ğŸ’§</span>
                    <div class="font-bold text-lg">Ø±Ø·ÙˆØ¨Ø© Ø§Ù„ØªØ±Ø¨Ø©</div>
                    <div class="text-2xl font-bold" id="val-humidity">-- %</div>
                </div>
                <div class="common-card bg-pink-300 cursor-pointer" data-key="temperature" role="button" tabindex="0">
                    <span class="text-4xl">ğŸŒ¡ï¸</span>
                    <div class="font-bold text-lg">Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø©</div>
                    <div class="text-2xl font-bold" id="val-temperature">-- Â°C</div>
                </div>
                <div class="common-card bg-pink-400 cursor-pointer" data-key="wind" role="button" tabindex="0">
                    <span class="text-4xl">ğŸ’¨</span>
                    <div class="font-bold text-lg">Ø§Ù„Ø±ÙŠØ§Ø­</div>
                    <div class="text-2xl font-bold" id="val-wind">-- ÙƒÙ…/Ø³</div>
                </div>
                <div class="common-card bg-pink-500 cursor-pointer" data-key="rainProb" role="button" tabindex="0">
                    <span class="text-4xl">â˜ï¸</span>
                    <div class="font-bold text-lg">Ø£Ù…Ø·Ø§Ø± ØºØ¯Ø§Ù‹</div>
                    <div class="text-2xl font-bold" id="val-rainProb">-- %</div>
                </div>
                <div class="common-card bg-pink-600" data-key="realtime">
                    <span class="text-4xl">âš¡</span>
                    <div class="font-bold text-lg">Ù…Ø³ØªØ´Ø¹Ø± Ø§Ù„Ù…Ø·Ø±</div>
                    <div class="text-2xl font-bold" id="val-realtime">Ù…ØªÙˆÙ‚Ù</div>
                </div>
                <div class="common-card bg-pink-500 cursor-pointer" data-key="soil" role="button" tabindex="0">
                    <span class="text-4xl">ğŸŒ±</span>
                    <div class="font-bold text-lg">Ø¬ÙˆØ¯Ø© Ø§Ù„ØªØ±Ø¨Ø©</div>
                    <div class="text-2xl font-bold" id="val-soil">--</div>
                </div>
                <div class="common-card bg-pink-400 cursor-pointer" data-key="forecast" role="button" tabindex="0">
                    <span class="text-4xl">ğŸ“…</span>
                    <div class="font-bold text-lg">ØªÙˆÙ‚Ø¹Ø§Øª Ø§Ù„ÙŠÙˆÙ…</div>
                    <div class="text-xl font-bold" id="val-forecast">--</div>
                </div>
            </div>
            <div class="text-center text-base text-gray-700 pt-4 border-t font-bold">
                Ø§Ø¶ØºØ·ÙŠ Ø¹Ù„Ù‰ Ø£ÙŠ Ø¨Ø·Ø§Ù‚Ø© Ù„Ø·Ø±Ø­ Ø³Ø¤Ø§Ù„ Ø¹Ù„Ù‰ Ù…Ø¨Ø±ÙˆÙƒØ©.
            </div>
        </div>
        <div class="w-full lg:w-96 xl:w-[450px] bg-pink-50 border-r-4 border-pink-400 flex flex-col h-full min-w-[320px] rounded-2xl ml-2">
            <!-- Chat header -->
            <div id="chat-header" class="p-4 border-b-4 border-pink-400 bg-pink-200 rounded-t-2xl shadow-sm flex items-center gap-2">
                <span class="text-2xl">ğŸ‘©â€ğŸŒ¾</span>
                <div id="chat-title" class="text-xl font-bold text-pink-900">Ù…Ø¨Ø±ÙˆÙƒØ© â€” Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©</div>
                <div id="ws-status" class="ml-auto flex items-center gap-2">
                    <span id="ws-dot" class="w-2.5 h-2.5 rounded-full bg-gray-300"></span>
                    <span id="ws-text" class="text-sm font-semibold">ØºÙŠØ± Ù…ØªØµÙ„</span>
                </div>
            </div>
            <!-- Chat messages -->
            <div id="chat-messages" class="flex-1 p-4 space-y-4 overflow-y-auto bg-pink-50">
                <div class="flex justify-center">
                    <div class="p-4 rounded-2xl bg-white shadow text-green-800 max-w-md text-center">
                        <span class="text-4xl mb-2 block">ğŸ‘©â€ğŸŒ¾</span>
                        <div class="font-bold text-lg">Ù…Ø¨Ø±ÙˆÙƒØ© ÙÙŠ Ø®Ø¯Ù…ØªÙƒ!</div>
                        <div class="text-gray-600">Ø§Ø³Ø£Ù„ÙŠÙ†ÙŠ Ø¹Ù† Ø²Ø±Ø§Ø¹ØªÙƒ ÙˆØ³Ø£Ø¹Ø·ÙŠÙƒ Ù†ØµÙŠØ­Ø©.</div>
                    </div>
                </div>
            </div>
            <!-- Chat input -->
            <div class="p-4 bg-white border-t rounded-b-2xl">
                <div class="flex gap-2">
                    <input id="userInput" type="text" placeholder="...Ø§Ø³Ø£Ù„ Ù…Ø¨Ø±ÙˆÙƒØ©" class="flex-1 px-5 py-3 border-2 border-pink-200 rounded-full focus:ring-2 focus:ring-pink-400 text-lg"/>
                    <button id="sendBtn" class="w-12 h-12 bg-pink-600 text-white rounded-full hover:bg-pink-700 hover:scale-110">
                        <svg class="w-6 h-6 m-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/></svg>
                    </button>
                    <button id="micBtn" class="w-12 h-12 bg-pink-400 text-white rounded-full hover:bg-pink-500 hover:scale-110">
                        <svg class="w-6 h-6 m-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- Control Buttons -->
    <div class="fixed bottom-6 right-6 flex flex-col gap-4">
        <button id="readPageBtn" class="bg-pink-600 text-white rounded-full w-14 h-14 hover:bg-pink-700 shadow-lg flex items-center justify-center group relative">
            ğŸ”Š
            <span class="absolute right-16 bg-white px-3 py-1 rounded-lg shadow text-pink-600 text-sm font-bold opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap">Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù†ØµØ§Ø¦Ø­</span>
        </button>
        <button id="assistantBtn" class="bg-pink-500 text-white rounded-full w-14 h-14 hover:bg-pink-600 shadow-lg flex items-center justify-center group relative">
            ğŸ¯
            <span class="absolute right-16 bg-white px-3 py-1 rounded-lg shadow text-pink-600 text-sm font-bold opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap">Ù…Ø³Ø§Ø¹Ø¯Ø© ØµÙˆØªÙŠØ©</span>
        </button>
        <button id="weatherBtn" class="bg-pink-400 text-white rounded-full w-14 h-14 hover:bg-pink-500 shadow-lg flex items-center justify-center group relative">
            ğŸŒ¤ï¸
            <span class="absolute right-16 bg-white px-3 py-1 rounded-lg shadow text-pink-600 text-sm font-bold opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø·Ù‚Ø³</span>
        </button>
    </div>

    <!-- Alert Modal -->
    <div id="rain-alert" class="fixed inset-0 bg-black/75 items-center justify-center z-50 hidden">
        <div class="bg-white rounded-2xl shadow-2xl p-8 max-w-md text-center">
            <div class="text-8xl animate-pulse">âš ï¸</div>
            <div class="mt-4 text-3xl font-bold text-red-700">! ØªÙ†Ø¨ÙŠÙ‡: ØªÙ… Ø±ØµØ¯ Ø£Ù…Ø·Ø§Ø±</div>
            <div class="mt-2 text-lg text-gray-600">! Ù‚ÙˆÙ…ÙŠ Ø¨Ø­Ù…Ø§ÙŠØ© Ù…Ø­Ø§ØµÙŠÙ„Ùƒ ÙÙˆØ±Ø§Ù‹</div>
        </div>
    </div>

    <!-- Copyright Footer -->
    <footer class="fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-sm shadow-lg">
        <div class="container mx-auto px-4 py-3">
            <div class="flex flex-col sm:flex-row justify-between items-center gap-2 text-sm text-pink-800">
                <div class="flex items-center gap-2">
                    <span>Â© 2024 Women In Engineering Tunisia</span>
                    <span class="hidden sm:inline">|</span>
                    <span>Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„ÙÙ„Ø§Ø­Ø© Ø§Ù„Ø°ÙƒÙŠØ©</span>
                </div>
                <div class="flex items-center gap-2">
                    <span>ÙØ±ÙŠÙ‚ Winners:</span>
                    <span class="font-semibold">Ø£Ø³Ù…Ø§Ø¡ØŒ Ø³Ù„Ù…Ù‰ØŒ Ù†ÙˆØ±</span>
                </div>
            </div>
        </div>
    </footer>

    <script src="./script.js" defer></script>
</body>
</html>